<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<style>
:root {
    --col: 2; /* mapping-list columns */
    --c0: black; /* highlight color */
    --c1: lightblue; /* highlight bg color */
    --c2: lightseagreen; /* border color */
    --lc0: gray;
    --lc1: goldenrod;
    --lc2: darkred;
    --lc3: darkgreen;
    --lc4: blue;
    --ks: calc(1rem * var(--ks1, 0.8)); /* key font size */
    --kw: calc(1rem * var(--kw1, 3)); /* key width */
    --kh: calc(1rem * var(--kh1, 3)); /* key height */
    --kt: calc(1rem * var(--kt2, 0.8)); /* keytop description text size */
}
[data-kbhint="true"] {
    --ks: calc(1rem * var(--ks2, 0.9)); /* key font size */
    --kw: calc(1rem * var(--kw2, 5)); /* key width */
    --kh: calc(1rem * var(--kh2, 5)); /* key height */
}

body {
    font-family: Consolas, sans-serif;
    font-size: 0.9rem;
    margin: 0px auto;
    padding: 0px 10px;
    height: 100%;
    background-color: whitesmoke;
    overflow-y: hidden;
    display: flex;
    flex-flow: column;
    /* width: max-content; */
    width: var(--kbw);
    /* gap: 10px; */
}

textarea {
    resize: none;
    font-size: 0.9rem;
    font-family: Consolas, sans-serif;
    border: 1px solid gray;
    outline: 0px;
}

textarea:focus {
    background-color: cornsilk;
}

input[type="checkbox"] {
    vertical-align: bottom;
}

keyboard {
    --bdc: gray;
    box-sizing: border-box;
    display: grid;
    grid-template-columns: repeat(3, max-content);
    grid-auto-flow: row;
    border: 2px solid var(--bdc);
    border-radius: 10px;
    box-shadow: 0px 0px 10px var(--bdc);
    background-color: var(--bdc);
    background-image: linear-gradient(0deg, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.85) 100%);
    padding: 10px;
    gap: 10px;
    width: fit-content;
    height: fit-content;
    overflow: hidden;
    margin: 5px;
}

kb_main,
kb_dir,
kb_num {
    display: grid;
    gap: 3px;
    width: 100%;
    overflow: hidden;
}

kb_main {
    grid-template-rows: var(--kh) 10px repeat(5, var(--kh));
    grid-auto-rows: var(--kh);
}

kb_dir {
    grid-template: var(--kh) 10px repeat(5, var(--kh)) / repeat(3, var(--kw));
}

kb_ext {
    grid-column: span 3;
    display: flex;
    gap: 3px;
    border-radius: 5px;
    border: 1px dashed var(--c2);
    padding: 3px;
}

kb_num {
    grid-template: repeat(5, var(--kh)) / repeat(4, var(--kw));
    margin-top: calc(var(--kh) + 10px + 3px * 2);
}

kr {
    display: flex;
    justify-content: space-between;
    height: var(--kh);
    gap: 3px;
}

kr.Fn {
    display: grid;
    grid-auto-flow: column;
    grid-template-columns: min-content 1fr repeat(4, min-content) 1fr repeat(4, min-content) 1fr repeat(4, min-content);
}

[data-kbsize="1"] kb_dir,
[data-kbsize="1"] kb_num,
[data-kbsize="2"] kb_num,
[data-kbsize="1"] kb_ext,
[data-kbsize="2"] kb_ext,
[data-kbsize="3"] kb_ext {
    display: none;
}

k {
    color: black;
    font-size: var(--ks);
    font-weight: bold;
    box-sizing: border-box;
    display: inline-block;
    border: 1px solid darkgray;
    border-radius: 5px;
    background-color: lightgray;
    width: var(--kw);
    height: var(--kh);
    padding: 3px 3px;
    cursor: pointer;
    display: flex;
    flex-flow: column;
}
k.set {
    color: var(--c0);
    background-color: var(--c1);
    border-color: var(--c2);
}

.k1 {
    width: var(--kw);
}

.k15 {
    width: calc(var(--kw) * 1.5 + 3px);
}

.k2,
.k2h {
    width: calc(var(--kw) * 2 + 3px);
}

.k25 {
    width: calc(var(--kw) * 2.5 + 4px);
}

.kspace {
    flex: 1;
}

.k2v {
    grid-row: span 2;
    height: calc(var(--kh) * 2 + 3px)
}

.k2h {
    grid-column: span 2;
}

d {
    display: inline-block;
    border: 1px solid transparent;
    height: var(--kh);
}

.d3 {
    width: calc(var(--kw) * 3 + 3px * 2);
    grid-column: span 3;
}

.dis {
    cursor: not-allowed;
    background-color: pink;
    background-image: linear-gradient(45deg, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%);
    background-size: calc(var(--kw) / 2) calc(var(--kh) / 2);
}

kn, km {
    box-sizing: border-box;
    display: inline-block;
    line-height: 1rem;
    vertical-align: middle;
}
kn {
    font-weight: bold;
    color: var(--c0);
    background-color: var(--c1);
    border: 1px solid var(--c2);
    border-radius: 5px;
    height: fit-content;
    width: fit-content;
    min-width: calc(1rem + 6px);
    padding: 2px 5px;
    margin: 0px 1px;
    text-align: center;
}
kn.ck {
    border-color: transparent;
    font-weight: normal;
}

.f-end {
    justify-self: end;
    text-align: right;
}

km {
    width: fit-content;
    height: fit-content;
    white-space: pre-wrap;
    word-wrap: break-word;
    padding: 2px 5px;
    margin-right: 5px;
    border: 1px solid lightgray;
    border-radius: 5px;
    background-color: lightgray;
}

.ktn, .ktr, .ktm {
    box-sizing: border-box;
    pointer-events: none;
}
.ktr {
    display: none;
    min-height: 1.5em;
    overflow-wrap: anywhere;
    flex: 1;
}
.ktm {
    display: none;
    overflow: hidden;
    font-size: var(--kt);
    font-weight: normal;
    white-space: pre-wrap;
}
[data-kbhint="true"] .ktn {
    display: none;
}
[data-kbhint="true"] .ktr,
[data-kbhint="true"] .ktm {
    display: unset;
}

.kms_info {
    box-sizing: border-box;
    border: 1px solid var(--c2);
    border-radius: 5px;
    background-color: whitesmoke;
    width: fit-content;
    height: fit-content;
    padding: 5px;
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 3px 1px;
    align-content: flex-start;
    pointer-events: none;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: opacity 0.3s;
    max-width: calc(var(--kbw) * 0.5);
    z-index: 2;
}

.btn {
    padding: 3px 6px;
    border: 1px solid var(--c2);
    cursor: pointer;
}

.btn.danger:hover,
.smbtn.danger:hover {
    color: black;
    border-color: red;
    background-color:lightpink;
    outline: 1px dashed red;
    outline-offset: 1px;
}

.smbtn {
    box-sizing: border-box;
    font-size: 12px;
    line-height: 12px;
    text-align: center;
    padding: 0px 3px;
    height: 20px;
    min-width: 24px;
    border: 1px solid var(--c2);
}
.smbtn {
    cursor: pointer;
}

#btn_l0,
#btn_l1,
#btn_l2,
#btn_l3,
#btn_l4 {
    background-color: var(--bdc);
    color: var(--blc, black);
    border-color: var(--bdc, var(--c2));
}

#btn_l0:hover,
[data-layer="0"] #btn_l0,
[data-layer="0"] keyboard {
    --bdc: var(--lc0);
    --blc: whitesmoke;
}

#btn_l1:hover,
[data-layer="1"] #btn_l1,
[data-layer="1"] keyboard {
    --bdc: var(--lc1);
    --blc: whitesmoke;
}

#btn_l2:hover,
[data-layer="2"] #btn_l2,
[data-layer="2"] keyboard {
    --bdc: var(--lc2);
    --blc: whitesmoke;
}

#btn_l3:hover,
[data-layer="3"] #btn_l3,
[data-layer="3"] keyboard {
    --bdc: var(--lc3);
    --blc: whitesmoke;
}

#btn_l4:hover,
[data-layer="4"] #btn_l4,
[data-layer="4"] keyboard {
    --bdc: var(--lc4);
    --blc: whitesmoke;
}

.tabbtn {
    display: inline-block;
    border: 1px solid gray;
    border-bottom: 0px;
    border-radius: 5px 5px 0 0;
    padding: 5px 10px 0px;
    cursor: pointer;
}

.btn:hover,
.smbtn:hover,
.tabbtn:hover,
.tabbtn.sel,
[data-view="kb"] #tabbtn_kb,
[data-view="list"] #tabbtn_list,
[data-view="json"] #tabbtn_json {
    border-color: var(--c2);
    background-color: var(--c1);
    color: var(--c0);
}

#kb_ops {
    display: flex;
    border: 1px solid gray;
    border-bottom: 0px;
    align-items: center;
}
#json_ops {
    display: flex;
    border: 1px solid gray;
    border-bottom: 0px;
    align-items: center;
}

[data-view="kb"] #json_ops,
[data-view="list"] #json_ops {
    display: none;
}
[data-view="json"] #kb_ops {
    display: none;
}

.kb_op {
    visibility: hidden;
}
[data-view="kb"] .kb_op {
    visibility: visible;
}

.tab {
    display: flex;
    box-sizing: border-box;
    height: 100%;
    width: 100%;
    overflow-y: hidden;
    border: 1px solid gray;
    background-color: whitesmoke;
}

#tab_kb {
    position: absolute;
    width: fit-content;
    height: 100%;
    /* overflow-y: auto; */
}
#tab_list {
    position: absolute;
}
#tab_json {
    position: absolute;
}

/* [data-view="kb"] :is(#tab_list, #tab_json),
[data-view="list"] :is(#tab_kb, #tab_json),
[data-view="json"] :is(#tab_kb, #tab_list) {
    display: none;
} */
[data-view="kb"] #tab_kb,
[data-view="list"] #tab_list,
[data-view="json"] #tab_json {
    z-index: 1;
}

#list {
    display: grid;
    grid-template-columns: repeat(var(--col), max-content 1fr);
    gap: 3px 1px;
    align-content: flex-start;
    padding: 10px;
    box-sizing: border-box;
    height: 100%;
    width: 100%;
    overflow-y: auto;
}

#json {
    border: 0px;
    width: 100%;
    height: 100%;
}

dialog {
    display: flex;
    flex-flow: column;
    align-content: flex-start;
    gap: 1rem;
    border: 2px solid var(--c2);
    outline: 3px solid var(--c1);
}

.kmdlg {
    width: 40rem;
    height: 20rem;
}

.stdlg .sts {
    display: grid;
    grid-auto-flow: row;
    grid-template-columns: repeat(4, max-content);
    gap: 5px;
    padding-bottom: 10px;
    border-bottom: 1px solid gray;
}
.stdlg .subttl {
    grid-column: 1 / -1;
    margin-top: 1rem;
    font-weight: bold;
    background-color: var(--c1);
    padding: 3px;
    text-align: center;
}
.stdlg span {
    text-align: end;
}
.about {
    height: fit-content;
    color: gray;
    padding-bottom: 2px;
    text-align: center;
}

.prof_name {
    outline: 1px solid var(--c2);
    border-radius: 5px;
    padding: 3px 1em;
    /* text-align: center; */
    width: 20em;
    cursor: pointer;
    white-space: nowrap;
    overflow-x: hidden;
    text-overflow: ellipsis;
}
.prof_name:hover {
    font-weight: bold;
    background-color: var(--c1);
}
.prof_list {
    box-sizing: content-box;
    outline: 1px solid var(--c2);
    border-radius: 5px;
    background-color: whitesmoke;
    width: 22em;
    height: fit-content;
    max-height: calc(var(--kh) * 5);
    padding: 5px;
    display: flex;
    flex-flow: column;
    gap: 5px;
    overflow-y: auto;
    overflow-x: hidden;
    transition: opacity 0.3s;
    z-index: 2;
}
.prof_cur {
    font-weight: bold;
    background-color: var(--c1);
}
.prof_new {
    /* color: var(--c2); */
}
.rnd {
    border-radius: 5px;
}
.cap {
    font-family: sans-serif;
    font-size: 1.1rem;
    font-weight: bold;
    padding: 5px 3rem;
    color: gray;
    background-color: lightgray;
}
</style>
</head>

<body>
<div class="cap">
    <span>键谱</span>
    <span style="font-size: 75%;">—— 让“记录快捷键”变得简单</span>
</div>
<div style="display: flex;gap: 3px;height: 2rem;margin-top:10px;">
    <span id="tabbtn_kb" class="tabbtn">键图</span>
    <span id="tabbtn_list" class="tabbtn">键表</span>
    <div style="flex: 1;display: flex;align-items:center;padding: 2px 0px;gap:2px;">
        <span style="flex: 1;text-align: right;font-weight: bold;">键谱：</span>
        <div id="btn_prof" class="prof_name prof_cur" style="margin-right: 5px;"></div>
        <button id="btn_clr" class="btn rnd danger">清空</button>
        <button id="btn_del" class="btn rnd danger">删除</button>
        <button id="btn_saveas" class="btn rnd">另存为</button>
            <span style="flex: 1;">&nbsp;</span>
    </div>
    <span id="tabbtn_json" class="tabbtn">数据</span>
</div>
<div id="kb_ops">
    <span>&nbsp;键盘层：</span>
    <button id="btn_l0" class="btn">0</button>
    <button id="btn_l1" class="btn">1</button>
    <button id="btn_l2" class="btn">2</button>
    <button id="btn_l3" class="btn">3</button>
    <button id="btn_l4" class="btn">4</button>
    <span>&nbsp;</span>
    <button id="btn_l_clr" class="btn danger">清空本层</button>
    <span style="flex: 1;">&nbsp;</span>
    <button id="btn_shorten" class="smbtn kb_op" title="收缩">➖</button>
    <button id="btn_expand" class="smbtn kb_op" title="扩展">➕</button>
    <button id="btn_hint" class="smbtn kb_op" title="切换键帽提示">🔣</button>
    <button id="btn_setting" class="smbtn kb_op" title="UI 设置">🛠</button>
    <span style="flex: 1;">&nbsp;</span>
    <span>&nbsp;</span>
</div>
<div id="json_ops">
    &nbsp;JSON 数据随上图设置实时更新。也可在下方编辑 JSON 数据后：
    <button id="btn_imp" class="btn" style="margin: 2px;">导入至当前键谱</button>
    <button id="btn_imp2" class="btn" style="margin: 2px;">导入至新键谱</button>
</div>
<div style="position: relative;height: 100%;">
<div id="tab_kb" class="tab">
    <keyboard id="keyboard">
        <kb_main id="kb_main">
            <kr class="Fn">
                <k>Esc</k><d> </d><k>F1</k><k>F2</k><k>F3</k><k>F4</k><d> </d><k>F5</k><k>F6</k><k>F7</k><k>F8</k><d> </d><k>F9</k><k>F10</k><k>F11</k><k>F12</k>
            </kr>
            <kr></kr>
            <kr>
                <k>`</k><k>1</k><k>2</k><k>3</k><k>4</k><k>5</k><k>6</k><k>7</k><k>8</k><k>9</k><k>0</k><k>-</k><k>=</k><k class="k2">Backspace</k>
            </kr>
            <kr>
                <k class="k15">Tab</k><k>Q</k><k>W</k><k>E</k><k>R</k><k>T</k><k>Y</k><k>U</k><k>I</k><k>O</k><k>P</k><k>[</k><k>]</k><k class="k15">\</k>
            </kr>
            <kr>
                <k class="k2">Caps</k><k>A</k><k>S</k><k>D</k><k>F</k><k>G</k><k>H</k><k>J</k><k>K</k><k>L</k><k>;</k><k>'</k><k class="k2">Enter</k>
            </kr>
            <kr>
                <k class="k25">Shift</k><k>Z</k><k>X</k><k>C</k><k>V</k><k>B</k><k>N</k><k>M</k><k>,</k><k>.</k><k>/</k><k class="k25">RShift</k>
            </kr>
            <kr>
                <k class="k15">Ctrl</k><k class="k15">Win</k><k class="k15">Alt</k><k class="kspace">Space</k><k class="k15">RAlt</k><k class="k15">Menu</k><k class="k15">RCtrl</k>
            </kr>
        </kb_main>
        <kb_dir id="kb_dir">
            <k>PrtScr</k><k>ScrLck</k><k>Pause</k>
            <d class="d3"> </d>
            <k>Ins</k><k>Home</k><k>PgUp</k>
            <k>Del</k><k>End</k><k>PgDn</k>
            <d class="d3"> </d>
            <d> </d><k>Up</k><d> </d>
            <k>Left</k><k>Down</k><k>Right</k>
        </kb_dir>
        <kb_num id="kb_num">
            <k>NumLck</k><k>Num/</k><k>Num*</k><k>Num-</k>
            <k>Num7</k><k>Num8</k><k>Num9</k><k class="k2v">Num+</k>
            <k>Num4</k><k>Num5</k><k>Num6</k>
            <k>Num1</k><k>Num2</k><k>Num3</k><k class="k2v">REnter</k>
            <k class="k2h">Num0</k><k>Num.</k>
        </kb_num>
        <kb_ext><d>Fn:</d>
            <k>F13</k><k>F14</k><k>F15</k><k>F16</k><k>F17</k><k>F18</k><k>F19</k><k>F20</k><k>F21</k><k>F22</k><k>F23</k><k>F24</k>
            <d style="margin-left: 10px;">鼠标:</d><k>LB</k><k>RB</k><k>MB</k><k>WhlUp</k><k>WhlDn</k>
        </kb_ext>
    </keyboard>
</div>
<div id="tab_list" class="tab">
    <div id="list"></div>
</div>
<div id="tab_json" class="tab">
    <textarea id="json"></textarea>
</div>
</div>
<div class="about"></div>

<script src="keymap.js"></script>
</body>

</html>