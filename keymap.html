<html data-layout="pc">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<style>
:root {
    --cols: 2; /* mapping-list columns */
    --c0: black; /* highlight color */
    --c1: lightblue; /* highlight bg color */
    --c2: lightseagreen; /* border color */
    --c3: black; /* unset fore color */
    --c4: lightgray; /* unset bg color */
    --bdc: gray;
    --ks: calc(1rem * var(--ks1, 0.8)); /* key font size */
    --kw: calc(1rem * var(--kw1, 3)); /* key width */
    --kh: calc(1rem * var(--kh1, 3)); /* key height */
    --kt: calc(1rem * var(--kt2, 0.8)); /* keytop description text size */
    --ui-fc: black;
    --ui-bgc: lightblue;
    --ui-bdc: lightseagreen;
}
[data-kbhint="true"] {
    --ks: calc(1rem * var(--ks2, 0.9)); /* key font size */
    --kw: calc(1rem * var(--kw2, 5)); /* key width */
    --kh: calc(1rem * var(--kh2, 5)); /* key height */
}

body {
    font-family: Consolas, sans-serif;
    font-size: 0.9rem;
    margin: 0px;
    padding: 0px 10px;
    height: 100%;
    background-color: whitesmoke;
    overflow-y: hidden;
    display: flex;
    flex-flow: column;
    width: var(--kbw);
}

textarea {
    resize: none;
    font-size: 0.9rem;
    font-family: Consolas, sans-serif;
    border: 0px solid gray;
    outline: 0px;
    background-color: whitesmoke;
    padding: 5px;
}

textarea:focus {
    background-color: cornsilk;
}

input[type="checkbox"] {
    vertical-align: bottom;
}

keyboard {
    box-sizing: border-box;
    display: flex;
    flex-flow: column;
    border: 2px solid var(--bdc);
    border-radius: 10px;
    background-color: var(--bdc);
    background-image: linear-gradient(0deg, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.85) 100%);
    padding: 10px;
    gap: 10px;
    width: fit-content;
    height: fit-content;
    overflow-y: hidden;
    margin: 5px;
}
keyboard:hover {
    box-shadow: 0px 0px 5px var(--c2);
    border-color: var(--c2);
    background-color: var(--c1);
}

kb_pc,
kb_main,
kb_dir,
kb_num,
kb_mac {
    display: grid;
    gap: 3px;
    width: 100%;
    overflow: hidden;
}
kb_pc {
    grid-template-columns: repeat(3, max-content);
    grid-auto-flow: row;
    gap: 10px;
}

kb_main {
    grid-template-rows: var(--kh) 10px repeat(5, var(--kh));
    grid-auto-rows: var(--kh);
}

kb_dir {
    /* grid-template: var(--kh) 10px repeat(5, var(--kh)) / repeat(3, var(--kw)); */
    grid-template-rows: var(--kh) 10px repeat(5, var(--kh));
    grid-auto-rows: var(--kh);
}

kb_num {
    grid-template: repeat(5, var(--kh)) / repeat(4, var(--kw));
    margin-top: calc(var(--kh) + 10px + 3px * 2);
}

kb_mac {
    grid-template-rows: repeat(6, max-content);
}

kb_ext {
    grid-column: span 3;
    display: flex;
    flex-wrap: wrap;
    gap: 3px;
    border-radius: 5px;
    border: 1px dashed darkgray;
    padding: 3px;
}

kr {
    display: flex;
    justify-content: space-between;
    height: var(--kh);
    gap: 3px;
}

[data-layout="mac"] kr {
    gap: 5px;
}

kr.Fn {
    display: grid;
    grid-auto-flow: column;
    grid-template-columns: min-content 1fr repeat(4, min-content) 1fr repeat(4, min-content) 1fr repeat(4, min-content);
}

[data-layout="pc"][data-kbsize="1"] kb_dir,
[data-layout="pc"][data-kbsize="1"] kb_num,
[data-layout="pc"][data-kbsize="2"] kb_num,
[data-layout="pc"][data-kbsize="1"] kb_ext,
[data-layout="pc"][data-kbsize="2"] kb_ext,
[data-layout="pc"][data-kbsize="3"] kb_ext,
[data-layout="mac"][data-kbsize="1"] kb_ext {
    display: none;
}

k, .k {
    color: var(--c3);
    font-size: var(--ks);
    font-weight: bold;
    box-sizing: border-box;
    display: inline-block;
    border: 1px solid darkgray;
    border-radius: 5px;
    background-color: var(--c4);
    width: var(--kw);
    height: var(--kh);
    padding: 3px 3px;
    display: flex;
    flex-flow: column;
}
k {
    cursor: pointer;
}
k.set {
    color: var(--c0);
    background-color: var(--c1);
    border-color: var(--c2);
}

.k1 {
    width: var(--kw);
}

.k13 {
    width: calc(var(--kw) * 1.3 + 3px);
}

.k15 {
    width: calc(var(--kw) * 1.5 + 3px);
}

.k2,
.k2h {
    width: calc(var(--kw) * 2 + 3px);
}

.k25 {
    width: calc(var(--kw) * 2.5 + 4px);
}

.kspace {
    flex: 1;
}

.kmacfn {
    flex: 1;
    height: calc(var(--kh) / 2);
}

[data-kbhint="true"] .kmacfn {
    height: var(--kh);
}

.k2v {
    grid-row: span 2;
    height: calc(var(--kh) * 2 + 3px)
}

.k05 {
    width: calc(var(--kw) / 2);
}

.k05v {
    height: calc(var(--kh) / 2);
}

.k2h {
    grid-column: span 2;
}

d {
    display: inline-block;
    border: 1px solid transparent;
    height: var(--kh);
}

.d1 {
    min-width: var(--kw);
}

.d3 {
    width: calc(var(--kw) * 3 + 3px * 2);
    grid-column: span 3;
}

.dis {
    cursor: not-allowed;
    background-color: pink;
    background-image: linear-gradient(45deg, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%);
    background-size: calc(var(--kw) / 2) calc(var(--kh) / 2);
}

kn, km {
    box-sizing: border-box;
    display: inline-block;
    line-height: 1rem;
    vertical-align: middle;
}
kn {
    font-weight: bold;
    color: var(--c0);
    background-color: var(--c1);
    border: 1px solid var(--c2);
    border-radius: 5px;
    height: fit-content;
    width: fit-content;
    min-width: 2rem;
    padding: 2px 5px;
    margin: 0px 1px;
    text-align: center;
}
kn.ck {
    border-color: transparent;
    font-weight: normal;
}

.f-end {
    justify-self: end;
    text-align: right;
}

km {
    width: fit-content;
    height: fit-content;
    white-space: pre-wrap;
    word-wrap: break-word;
    padding: 2px 5px;
    margin-right: 5px;
    border: 1px solid lightgray;
    border-radius: 5px;
    background-color: lightgray;
}

.ktn, .ktr, .ktm {
    box-sizing: border-box;
    pointer-events: none;
}
.ktr {
    display: none;
    min-height: 1.5em;
    overflow-wrap: anywhere;
    flex: 1;
}
.ktm {
    display: none;
    overflow: hidden;
    font-size: var(--kt);
    font-weight: normal;
    white-space: pre-wrap;
}
[data-kbhint="true"] .ktn {
    display: none;
}
[data-kbhint="true"] .ktr,
[data-kbhint="true"] .ktm {
    display: initial;
}
[data-kbhint="true"] #btn_hint {
    background-color: var(--ui-bdc);
}

.kms_info {
    box-sizing: border-box;
    border: 1px solid var(--c2);
    border-radius: 5px;
    background-color: whitesmoke;
    width: fit-content;
    height: fit-content;
    padding: 5px;
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 3px 1px;
    align-content: flex-start;
    pointer-events: none;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: calc(var(--kbw) * 0.5);
    position: absolute;
    box-shadow: 0px 3px 5px #000;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 2;
}

.btn {
    padding: 3px 6px;
    border: 1px solid var(--ui-bdc);
    cursor: pointer;
}

.btn.danger:hover,
.smbtn.danger:hover {
    color: black;
    border-color: red;
    background-color:lightpink;
}

.smbtn {
    box-sizing: border-box;
    font-size: 12px;
    line-height: 12px;
    text-align: center;
    padding: 0px 3px;
    height: 20px;
    min-width: 24px;
    border: 1px solid var(--ui-bdc);
}
.smbtn {
    cursor: pointer;
}

.tabbtn {
    display: inline-block;
    border: 1px solid gray;
    border-bottom: 0px;
    border-radius: 5px 5px 0 0;
    padding: 5px 10px 0px;
    cursor: pointer;
}

.btn:hover,
.smbtn:hover,
.tabbtn:hover,
.tabbtn.sel,
[data-view="k"] #tabbtn_kb,
[data-view="l"] #tabbtn_list,
[data-view="j"] #tabbtn_json {
    border-color: var(--ui-bdc);
    background-color: var(--ui-bgc);
    color: var(--ui-fc);
}

.btn_l {
    /* padding: 3px 6px; */
    font-size: 0.8rem;
    line-height: 1rem;
    height: 1.3rem;
    width: 2rem;
    vertical-align: bottom;
    border: 1px solid lightgray;
    color: darkgray;
    cursor: pointer;
}

.btn_l:hover,
.btn_l_cur {
    font-weight: bold;
    font-size: 1rem;
    color: var(--c0);
    border-color: var(--c2);
    background-color: var(--c1);
}

#kb_ops,
#json_ops {
    display: flex;
    border: 1px solid gray;
    /* border-bottom: 0px; */
    align-items: center;
    height: 2rem;
}

[data-view="k"] #json_ops,
[data-view="l"] #json_ops {
    display: none;
}
[data-view="j"] #kb_ops {
    display: none;
}

.tab {
    display: flex;
    flex-flow: column;
    box-sizing: border-box;
    height: 0px;
    width: 100%;
    overflow-y: hidden;
    border-style: solid;
    border-color: gray;
    border-width: 0px 1px;
    background-color: whitesmoke;
}

#tab_kb {
    position: relative;
    width: fit-content;
    /* height: 100%; */
}
#tab_list {
    /* position: absolute; */
}
#tab_json {
    /* position: absolute; */
}

/* [data-view="k"] #tab_kb,
[data-view="l"] #tab_list,
[data-view="j"] #tab_json {
    z-index: 1;
} */
[data-view="k"] #tab_kb,
[data-view="l"] #tab_list,
[data-view="j"] #tab_json {
    height: 100%;
    border-bottom-width: 1px;
}

#list {
    display: grid;
    grid-template-columns: repeat(var(--cols), max-content 1fr);
    gap: 3px 1px;
    align-content: flex-start;
    padding: 10px;
    box-sizing: border-box;
    height: 100%;
    width: 100%;
    overflow-y: auto;
}

#json {
    border: 0px;
    width: 100%;
    height: 100%;
}

dialog {
    display: flex;
    flex-flow: column;
    align-content: flex-start;
    gap: 1rem;
    border: 2px solid var(--ui-bdc);
    border-radius: 10px;
    box-shadow: 0px 5px 5px;
    margin-left: calc(var(--kbw) / 2);
    margin-top: 10rem;
    transform: translateX(-50%);
}

.kmdlg {
    width: 40rem;
    height: 20rem;
}

.name_dlg input[type="text"] {
    font-size: 1rem;
    height: 1.6em;
}

.stdlg .sts {
    display: grid;
    grid-auto-flow: row;
    grid-template-columns: repeat(4, max-content);
    gap: 5px 1rem;
    padding-bottom: 10px;
    border-bottom: 1px solid gray;
}
.stdlg .subttl {
    grid-column: 1 / -1;
    margin-top: 1rem;
    font-weight: bold;
    background-color: var(--ui-bgc);
    padding: 3px;
    text-align: center;
}
.stdlg span {
    text-align: end;
}
.about {
    height: fit-content;
    color: gray;
    padding-bottom: 2px;
    text-align: right;
}

.prof_name {
    color: var(--ui-fc);
    border: 1px solid var(--ui-bdc);
    border-radius: 5px;
    padding: 3px 1em;
    width: 20em;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.prof_name:hover {
    font-weight: bold;
    background-color: var(--ui-bgc);
}
.prof_list {
    box-sizing: content-box;
    outline: 1px solid var(--ui-bdc);
    border-radius: 5px;
    background-color: whitesmoke;
    width: 22em;
    /* height: fit-content; */
    max-height: 90%;
    padding: 5px;
    overflow-y: auto;
    overflow-x: hidden;
    transition: opacity 0.3s;
    z-index: 2;
}
.prof_list .prof_name {
    margin-bottom: 5px;
}
.prof_cur {
    font-weight: bold;
    background-color: var(--ui-bgc);
}
.prof_cmd {
    /* color: var(--c2); */
    background-color: cornsilk;
    border-color: goldenrod;
    font-weight: bold;
}
.rnd {
    border-radius: 5px;
}
#row_cap {
    box-sizing: border-box;
    font-family: sans-serif;
    font-size: 1.1rem;
    font-weight: bold;
    height: 2rem;
    padding: 0px 3rem;
    color: gray;
    background-color: lightgray;
    text-align: right;
}
.slogan {
    font-size: 75%;
}
#row_tabbar {
    display: flex;
    gap: 3px;
    margin-top: 10px;
}
#comment {
    flex: 1;
}

[data-ui="single"] body {
    height: fit-content;
    overflow: auto;
}
[data-ui="single"] #row_cap {
    position: absolute;
    width: var(--kbw);
}
[data-ui="single"] #row_tabbar {
    height: 2rem;
    margin-top: 0px;
    pointer-events: none;
    transform: translateX(0px);
}
[data-ui="single"] #prof_name {
    pointer-events: all;
}
[data-ui="single"] :is(#row_tabbar .BIND-CLICK, #kb_ops, #comment, #json_ops, #tab_json) {
    display: none;
}
[data-ui="single"] :is(#tab_kb, #tab_list) {
    height: fit-content;
    border-width: 1px;
}
[data-ui="single"] #tab_kb {
    border-color: transparent;
}
#btn_ui_single,
[data-ui="single"] #btn_ui_tab {
    color: lightseagreen;
    cursor: pointer;
    font-size: 120%;
}
[data-ui="single"] #btn_ui_single {
    color: unset;
    font-size: unset;
    cursor: unset;
}
[data-layout="mac"] kb_pc {
    display: none;
}
[data-layout="pc"] kb_mac {
    display: none;
}
[data-layout="mac"] #btn_layout {
    background-color: var(--ui-bdc);
}

</style>
</head>

<body>
<div id="row_cap">
    <div style="height:2rem;">
        <span>键谱</span>
        <span class="slogan">
            —— 让“记录、展示快捷键”变得
            <span id="btn_ui_tab" class="BIND-CLICK">简</span>
            <span id="btn_ui_single" class="BIND-CLICK">单</span>
        </span>
    </div>
</div>
<div id="row_tabbar">
    <div style="flex: 1;display: flex;padding: 2px 0px;gap:2px;">
        <span style="font-weight: bold;padding: 3px 10px;font-size:1rem;">键谱</span>
        <div id="prof_name" class="prof_name prof_cur" style="margin-right: 5px;"></div>
        <button id="btn_clr" class="btn rnd danger BIND-CLICK">清空</button>
        <button id="btn_del" class="btn rnd danger BIND-CLICK">删除</button>
        <button id="btn_saveas" class="btn rnd BIND-CLICK">另存为</button>
        <span style="flex: 1;">&nbsp;</span>
    </div>
    <span id="tabbtn_kb" class="tabbtn BIND-CLICK">键图</span>
    <span id="tabbtn_list" class="tabbtn BIND-CLICK">键表</span>
    <span id="tabbtn_json" class="tabbtn BIND-CLICK">数据</span>
</div>
<div id="kb_ops">
    <span>&nbsp;</span>
    <button id="btn_setting" class="smbtn kb_op BIND-CLICK" title="UI 设置">🛠</button>
    <button id="btn_shorten" class="smbtn kb_op BIND-CLICK" title="收缩">➖</button>
    <button id="btn_expand" class="smbtn kb_op BIND-CLICK" title="扩展">➕</button>
    <button id="btn_hint" class="smbtn kb_op BIND-CLICK" title="键帽提示">🔣</button>
    <button id="btn_layout" class="smbtn kb_op BIND-CLICK" title="Mac键盘">🍏</button>
    <span>&nbsp;键盘层:</span>
    <span id="layer_btns"></span>
    <span>&nbsp;</span>
    <button id="btn_l_clr" class="btn danger BIND-CLICK">清空本层</button>
    <span style="flex: 1;">&nbsp;</span>
</div>
<!-- <div style="position: relative;height: 100%;"> -->
<div id="tab_kb" class="tab">
    <keyboard id="keyboard">
        <kb_pc>
            <kb_main>
                <kr class="Fn">
                    <k>Esc</k><d> </d><k>F1</k><k>F2</k><k>F3</k><k>F4</k><d> </d><k>F5</k><k>F6</k><k>F7</k><k>F8</k><d> </d><k>F9</k><k>F10</k><k>F11</k><k>F12</k>
                </kr>
                <div></div>
                <kr>
                    <k>`</k><k>1</k><k>2</k><k>3</k><k>4</k><k>5</k><k>6</k><k>7</k><k>8</k><k>9</k><k>0</k><k>-</k><k>=</k><k class="k2">Backspace</k>
                </kr>
                <kr>
                    <k class="k15">Tab</k><k>Q</k><k>W</k><k>E</k><k>R</k><k>T</k><k>Y</k><k>U</k><k>I</k><k>O</k><k>P</k><k>[</k><k>]</k><k class="k15">\</k>
                </kr>
                <kr>
                    <k class="k2">Caps</k><k>A</k><k>S</k><k>D</k><k>F</k><k>G</k><k>H</k><k>J</k><k>K</k><k>L</k><k>;</k><k>'</k><k class="k2">Enter</k>
                </kr>
                <kr>
                    <k class="k25">Shift</k><k>Z</k><k>X</k><k>C</k><k>V</k><k>B</k><k>N</k><k>M</k><k>,</k><k>.</k><k>/</k><k class="k25">RShift</k>
                </kr>
                <kr>
                    <k class="k15">Ctrl</k><k class="k15">Win</k><k class="k15">Alt</k>
                    <k class="kspace">Space</k>
                    <k class="k15">RAlt</k><k class="k15">Menu</k><k class="k15">RCtrl</k>
                </kr>
            </kb_main>
            <kb_dir>
                <kr>
                    <k>PrtScr</k><k>ScrLck</k><k>Pause</k>
                </kr>
                <kr></kr>
                <kr>
                    <k>Ins</k><k>Home</k><k>PgUp</k>
                </kr>
                <kr>
                    <k>Del</k><k>End</k><k>PgDn</k>
                </kr>
                <kr> </kr>
                <kr>
                    <d> </d><k>Up</k><d> </d>
                </kr>
                <kr>
                    <k>Left</k><k>Down</k><k>Right</k>
                </kr>
            </kb_dir>
            <kb_num>
                <k>NumLck</k><k>Num/</k><k>Num*</k><k>Num-</k>
                <k>Num7</k><k>Num8</k><k>Num9</k><k class="k2v">Num+</k>
                <k>Num4</k><k>Num5</k><k>Num6</k>
                <k>Num1</k><k>Num2</k><k>Num3</k><k class="k2v">REnter</k>
                <k class="k2h">Num0</k><k>Num.</k>
            </kb_num>
        </kb_pc>
        <kb_mac>
            <kr class="kmacfn">
                <k class="kmacfn">esc</k>
                <k class="kmacfn">F1</k><k class="kmacfn">F2</k><k class="kmacfn">F3</k><k class="kmacfn">F4</k><k class="kmacfn">F5</k><k class="kmacfn">F6</k>
                <k class="kmacfn">F7</k><k class="kmacfn">F8</k><k class="kmacfn">F9</k><k class="kmacfn">F10</k><k class="kmacfn">F11</k><k class="kmacfn">F12</k>
                <d class="k k05 k05v"> </d>
            </kr>
            <kr>
                <k>`</k><k>1</k><k>2</k><k>3</k><k>4</k><k>5</k><k>6</k><k>7</k><k>8</k><k>9</k><k>0</k><k>-</k><k>=</k><k class="k15">delete</k>
            </kr>
            <kr>
                <k class="k15">tab</k><k>Q</k><k>W</k><k>E</k><k>R</k><k>T</k><k>Y</k><k>U</k><k>I</k><k>O</k><k>P</k><k>[</k><k>]</k><k>\</k>
            </kr>
            <kr>
                <k class="kspace">capslock</k><k>A</k><k>S</k><k>D</k><k>F</k><k>G</k><k>H</k><k>J</k><k>K</k><k>L</k><k>;</k><k>'</k><k class="kspace">return</k>
            </kr>
            <kr>
                <k class="kspace">shift</k><k>Z</k><k>X</k><k>C</k><k>V</k><k>B</k><k>N</k><k>M</k><k>,</k><k>.</k><k>/</k><k class="kspace">r-shift</k>
            </kr>
            <kr>
                <k>fn</k>
                <k>control</k><k>option</k><k class="k13">command</k>
                <k class="kspace">Space</k>
                <k class="k15">r-command</k><k>r-option</k>
                <div>
                    <kr class="k05v">
                        <d class="k05v"> </d><k class="k05v">Up</k class="k05v"><d> </d>
                    </kr>
                    <kr class="k05v">
                        <k class="k05v">Left</k><k class="k05v">Down</k><k class="k05v">Right</k>
                    </kr>
                </div>
            </kr>
        </kb_mac>
        <kb_ext>
            <!-- <d class="k1">Fn:</d>
            <k>F13</k><k>F14</k><k>F15</k><k>F16</k><k>F17</k><k>F18</k><k>F19</k><k>F20</k><k>F21</k><k>F22</k><k>F23</k><k>F24</k>
            <span style="width: 100%"></span>
            <d class="k1">鼠标:</d><k>LB</k><k>RB</k><k>MB</k><k>WhlUp</k><k>WhlDn</k> -->
        </kb_ext>
    </keyboard>
    <textarea id="comment" placeholder="备注"></textarea>
</div>
<div id="tab_list" class="tab">
    <div id="list"></div>
</div>
<div id="json_ops">
    &nbsp;JSON 数据随上图设置实时更新。也可在下方编辑 JSON 数据后：
    <button id="btn_imp" class="btn BIND-CLICK" style="margin: 2px;">导入至当前键谱</button>
    <button id="btn_imp2" class="btn BIND-CLICK" style="margin: 2px;">导入至新键谱</button>
</div>
<div id="tab_json" class="tab">
    <textarea id="json"></textarea>
</div>
<!-- </div> -->
<div class="about"></div>

<script src="keymap.js">

</script>
</body>

</html>